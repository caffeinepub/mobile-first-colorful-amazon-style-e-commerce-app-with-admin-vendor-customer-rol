{
  "kind": "build_request",
  "title": "Replace SafeAdminGate with login-only AdminBypass and stabilize admin routes/dashboard",
  "priority": "high",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Remove `SafeAdminGate` and any role-based route guard logic from all `/admin` routes, and replace it with a new `AdminBypass` wrapper that only requires the user to be logged in.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-6"
        ],
        "quotes": [
          "Remove SafeAdminGate and all role-based route guards from admin routes.\n\nReplace with a simple AdminBypass wrapper that:\n- does not check roles\n- only checks that user is logged in\n- if not logged in, redirect to login\n- if logged in, allow admin page to render"
        ]
      },
      "acceptanceCriteria": [
        "`frontend/src/App.tsx` no longer imports or renders `SafeAdminGate` for `/admin`, `/admin/products`, `/admin/vendors`, and `/admin/orders`.",
        "No admin route uses `RequireRole` (or any `useIsAdmin`/role-check gate) to guard rendering.",
        "All admin pages still render inside `AdminErrorBoundary`."
      ]
    },
    {
      "id": "REQ-2",
      "text": "Implement `frontend/src/components/auth/AdminBypass.tsx` as a login-only wrapper: it must not check roles; it must redirect unauthenticated users to the login route; it must render children for authenticated users.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-6"
        ],
        "quotes": [
          "Replace with a simple AdminBypass wrapper that:\n- does not check roles\n- only checks that user is logged in\n- if not logged in, redirect to login\n- if logged in, allow admin page to render"
        ]
      },
      "acceptanceCriteria": [
        "`AdminBypass` does not import or call any role-checking hooks/utilities (e.g., `useIsAdmin`, `useGetCallerRole`, `RequireRole`, token checks).",
        "When the user is not logged in, navigating to any `/admin*` route redirects to `/customer-login` (existing login page).",
        "When the user is logged in, `AdminBypass` renders its `children` without additional gating.",
        "If auth state is still initializing, `AdminBypass` shows a simple stable loading state (no role verification)."
      ]
    },
    {
      "id": "REQ-3",
      "text": "Rebuild `frontend/src/pages/admin/AdminDashboardPage.tsx` to use a minimal, safe, and stable layout (avoid complex/fragile UI patterns) while preserving core functionality (vendor list + wallet due + enable/disable outlet).",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-6"
        ],
        "quotes": [
          "Rebuild admin dashboard with minimal safe components only.\nDo not include role verification logic for now.\n\nKeep layout simple and stable."
        ]
      },
      "acceptanceCriteria": [
        "`AdminDashboardPage` continues to: (1) fetch and display vendors, (2) show wallet due, and (3) allow enabling/disabling vendor outlet status via the existing mutation.",
        "The page layout is simplified (no unnecessary gradients/animated/complex decorative wrappers that could contribute to instability); use basic container, headings, and cards/tables with predictable rendering.",
        "No role verification logic is added to `AdminDashboardPage` (it must not check admin role before running).",
        "The dashboard renders without crashing even when vendor list is empty, loading, or mutation errors occur (errors should be handled with existing `toast` messaging and overall `AdminErrorBoundary`)."
      ]
    }
  ],
  "constraints": [
    "Do not add any role verification logic for admin routes/pages for now (no admin role checks, no RequireRole, no SafeAdminGate behavior reintroduced).",
    "Redirect unauthenticated users attempting to access `/admin*` routes to the existing `/customer-login` route.",
    "Do not modify files under `frontend/src/components/ui` or other frontend immutable paths listed in SYSTEM_CONTEXT."
  ],
  "nonGoals": [
    "Reintroducing admin role-based authorization/verification on frontend routes.",
    "Changing backend authorization rules or backend data models.",
    "Adding new admin features beyond stabilizing routing and simplifying the admin dashboard UI."
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}